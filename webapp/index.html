<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1"
/>
<title>Habit Tracker</title>
<!-- âœ… Bootstrap 5 Styles -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<!-- âœ… Bootstrap Icons -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
/>
<style>
body {
  padding: 1rem;
}
.add-button {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  font-size: 1.25rem;
}
</style>
</head>
<body>
<div class="container">
  <h1 class="text-center my-4">My Habits</h1>
  <div id="habitsList" class="row g-3"></div>
</div>

<!-- âœ… Add Habit Button -->
<button id="addHabitBtn" class="btn btn-primary rounded-circle add-button p-3">
  <i class="bi bi-plus"></i>
</button>

<!-- âœ… Scripts -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
window.Telegram.WebApp.ready();

// âœ… Habits as JSON
const habits = [
  {
    title: "Morning Workout",
    description: "30 minutes of exercise",
    streak: 5,
    icon: "bi-lightning-charge",
    progress: 75,
    done: true
  },
  {
    title: "Read for 30 mins",
    description: "Daily reading habit",
    streak: 12,
    icon: "bi-book",
    progress: 50,
    done: false
  }
];

// âœ… Render Habits
function getHabitColor(progress) {
  if (progress < 33) {
    return "danger";
  } else if (progress < 66) {
    return "warning";
  } else {
    return "primary";
  }
}

function renderHabits() {
  const container = document.getElementById("habitsList");
  container.innerHTML = ""; // Clear before rendering
  habits.forEach(habit => {
    const color = getHabitColor(habit.progress);
    const card = `
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card p-3 rounded-3 shadow-sm border">
          <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
              <div class="bg-${color}-subtle rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                <i class="bi ${habit.icon} text-${color}"></i>
              </div>
              <div>
                <h6 class="mb-0">${habit.title}</h6>
                <small class="text-muted">${habit.description}</small>
              </div>
            </div>
            <div class="d-flex align-items-center gap-2">
              <small class="text-muted">ðŸ”¥ ${habit.streak} days</small>
              <button class="btn ${habit.done ? 'btn-success' : 'btn-outline-success'} btn-sm rounded-circle">
                <i class="bi ${habit.done ? 'bi-check2' : 'bi-circle'}"></i>
              </button>
            </div>
          </div>
          <div class="progress mt-2" style="height: 6px;">
            <div class="progress-bar bg-${color}" style="width: ${habit.progress}%;"></div>
          </div>
        </div>
      </div>`;
    container.innerHTML += card;
  });
}

// âœ… Event Listeners
document.getElementById("addHabitBtn").addEventListener("click", () => {
  alert("Add Habit Button Clicked!");
});

renderHabits();

// âœ… Theme
function applyTheme() {
  const theme = window.Telegram.WebApp.themeParams;
  document.body.style.backgroundColor = theme.bg_color || "#ffffff";
  document.body.style.color = theme.text_color || "#000000";
}
applyTheme();
</script>
<!-- âœ… Optional JS: Bootstrap Bundle for responsiveness-->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/bootstrap.bundle.min.js"
></script>
</body>
</html>
